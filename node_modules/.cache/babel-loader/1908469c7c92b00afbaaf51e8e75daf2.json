{"ast":null,"code":"import _objectSpread from\"/Users/Mihail/Desktop/dev/todoReactTS/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"/Users/Mihail/Desktop/dev/todoReactTS/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/Mihail/Desktop/dev/todoReactTS/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import{todoContext}from'./todoContext';import{jsx as _jsx}from\"react/jsx-runtime\";// const DEFAULT_TODO_LIST = [\n//   { id: 1, name: 'task 1', description: 'description 1', checked: false },\n//   { id: 2, name: 'task 2', description: 'description 2', checked: false },\n//   {\n//     id: 3,\n//     name: 'task 3',\n//     description: 'description descriptiondescriptiondescriptiondescription 3',\n//     checked: true,\n//   },\n// ];\nexport var TodoProvider=function TodoProvider(_ref){var children=_ref.children;// const [todos, setTodos] = React.useState(DEFAULT_TODO_LIST);\nvar _React$useState=React.useState(function(){// get the todos from localstorage\nvar savedTodos=localStorage.getItem(\"todos\");// if there are todos stored\nif(savedTodos){// return the parsed JSON object back to a javascript object\nreturn JSON.parse(savedTodos);// otherwise\n}else{// return an empty array\nreturn[];}}),_React$useState2=_slicedToArray(_React$useState,2),todos=_React$useState2[0],setTodos=_React$useState2[1];var _React$useState3=React.useState(null),_React$useState4=_slicedToArray(_React$useState3,2),todoIdEdit=_React$useState4[0],setTodoIdEdit=_React$useState4[1];React.useEffect(function(){var todos=JSON.parse(localStorage.getItem('todos')||'{}');if(todos){setTodos(todos);}},[]);React.useEffect(function(){localStorage.setItem('todos',JSON.stringify(todos));},[todos]);var selectTodoForEdit=function selectTodoForEdit(id){setTodoIdEdit(id);};var addTodo=function addTodo(_ref2){var name=_ref2.name,description=_ref2.description;setTodos([].concat(_toConsumableArray(todos),[{id:todos[todos.length-1].id+1,description:description,name:name,checked:false}]));};var checkTodo=function checkTodo(id){setTodos(todos.map(function(todo){if(todo.id===id){return _objectSpread(_objectSpread({},todo),{},{checked:!todo.checked});}return todo;}));};var deleteTodo=function deleteTodo(id){setTodos(todos.filter(function(todo){return todo.id!==id;}));};var changeTodo=function changeTodo(_ref3){var name=_ref3.name,description=_ref3.description;setTodos(todos.map(function(todo){if(todo.id===todoIdEdit){return _objectSpread(_objectSpread({},todo),{},{name:name,description:description});}return todo;}));setTodoIdEdit(null);};var value=React.useMemo(function(){return{todoIdEdit:todoIdEdit,todos:todos,deleteTodo:deleteTodo,changeTodo:changeTodo,addTodo:addTodo,selectTodoForEdit:selectTodoForEdit,checkTodo:checkTodo};},[todoIdEdit,todos,deleteTodo,changeTodo,addTodo,selectTodoForEdit,checkTodo]);return/*#__PURE__*/_jsx(todoContext.Provider,{value:value,children:children});};","map":{"version":3,"names":["React","todoContext","TodoProvider","children","useState","savedTodos","localStorage","getItem","JSON","parse","todos","setTodos","todoIdEdit","setTodoIdEdit","useEffect","setItem","stringify","selectTodoForEdit","id","addTodo","name","description","length","checked","checkTodo","map","todo","deleteTodo","filter","changeTodo","value","useMemo"],"sources":["/Users/Mihail/Desktop/dev/todoReactTS/src/utils/contexts/todoProvider.tsx"],"sourcesContent":["import React from 'react';\nimport ts from 'typescript';\nimport { todoContext } from './todoContext';\ntype Todo = {\n  id: number;\n  name: string;\n  description: string;\n  checked: boolean;\n};\ninterface TodoProviderProps {\n  children: React.ReactNode;\n}\n// const DEFAULT_TODO_LIST = [\n//   { id: 1, name: 'task 1', description: 'description 1', checked: false },\n//   { id: 2, name: 'task 2', description: 'description 2', checked: false },\n//   {\n//     id: 3,\n//     name: 'task 3',\n//     description: 'description descriptiondescriptiondescriptiondescription 3',\n//     checked: true,\n//   },\n// ];\nexport const TodoProvider: React.FC<TodoProviderProps> = ({ children }) => {\n  // const [todos, setTodos] = React.useState(DEFAULT_TODO_LIST);\n  const [todos, setTodos] = React.useState(() => {\n    // get the todos from localstorage\n    const savedTodos = localStorage.getItem(\"todos\");\n    // if there are todos stored\n    if (savedTodos) {\n      // return the parsed JSON object back to a javascript object\n      return JSON.parse(savedTodos);\n      // otherwise\n    } else {\n      // return an empty array\n      return [];\n    }\n  });\n  const [todoIdEdit, setTodoIdEdit] = React.useState<Todo['id'] | null>(null);\n  React.useEffect(() => {\n    const todos = JSON.parse(localStorage.getItem('todos') || '{}');\n    if (todos) {\n      setTodos(todos);\n    }\n  }, []);\n\n  React.useEffect(() => {\n    localStorage.setItem('todos', JSON.stringify(todos));\n  }, [todos]);\n\n  const selectTodoForEdit = (id: Todo['id']) => {\n    setTodoIdEdit(id);\n  };\n  const addTodo = ({ name, description }: Omit<Todo, 'checked' | 'id'>) => {\n    setTodos([\n      ...todos,\n      { id: todos[todos.length - 1].id + 1, description, name, checked: false },\n    ]);\n  };\n  const checkTodo = (id: Todo['id']) => {\n    setTodos(\n      todos.map((todo) => {\n        if (todo.id === id) {\n          return { ...todo, checked: !todo.checked };\n        }\n        return todo;\n      })\n    );\n  };\n  const deleteTodo = (id: Todo['id']) => {\n    setTodos(todos.filter((todo) => todo.id !== id));\n  };\n  const changeTodo = ({ name, description }: Omit<Todo, 'checked' | 'id'>) => {\n    setTodos(\n      todos.map((todo) => {\n        if (todo.id === todoIdEdit) {\n          return { ...todo, name, description };\n        }\n        return todo;\n      })\n    );\n    setTodoIdEdit(null);\n  };\n  const value = React.useMemo(\n    () => ({\n      todoIdEdit,\n      todos,\n      deleteTodo,\n      changeTodo,\n      addTodo,\n      selectTodoForEdit,\n      checkTodo,\n    }),\n    [\n      todoIdEdit,\n      todos,\n      deleteTodo,\n      changeTodo,\n      addTodo,\n      selectTodoForEdit,\n      checkTodo,\n    ]\n  );\n  return <todoContext.Provider value={value}>{children}</todoContext.Provider>;\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}